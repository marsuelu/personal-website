# personal-website遇到的问题及解决方法

- 本地开发，刷新界面，localStorage记录的数据清空
  ⋅⋅⋅ 每次刷新，useEffect会执行cleanup code,把return去掉就可以了。
  ⋅⋅⋅ 最开始查谷歌，stackOverflow，有一个问题“Why is localStorage getting cleared whenever I refresh the page?”，实际和我情况不相符。
```javascript
export const useTheme = () => {
  const [theme, setTheme] = useState<string>('');
  const setGlobalTheme = (newTheme: string) => {
    setTheme(newTheme);
    localStorage.setItem('theme', newTheme);
  };
  useEffect(() => {
    const initialTheme = localStorage.getItem('theme') || 'mediaTheme';
    setGlobalTheme(initialTheme);
  return () => {
    localStorage.removeItem('theme');
    };
  }, []);

  return { theme, setGlobalTheme };
};
```

- 修改node_modules内容，重新下载依赖，如何保证修改内容不被覆盖？
  ⋅⋅⋅ git上拉个fork，修改内容，然后后面还要注册npm，麻烦，放弃。
  ⋅⋅⋅ 用patch-package依赖。先在node_modules/fireworks-js里面改内容，下载该插件，package.json加指令，运行'npx patch-package fireworks-js',遂生成patches文件夹，里面包含修改内容。删除node_modules，重新下载依赖，检测是否生效。 如果fireworks-js版本更新，下载后patch-package会询问是否保留修改。

- 不要手输任何包名文件名！！！复制粘贴
